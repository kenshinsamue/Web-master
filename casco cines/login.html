<html>

    <meta charset="UTF-8">
    <head>

        <title>Casco cines</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
       <link rel="stylesheet" href="rectk_complicaciones.css" type="text/css" />
       <link rel="stylesheet" href="css/login.css" type="text/css" />

    </head>



    <body>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>


      <nav class="navbar navbar-expand-lg navbar-dark ">
       <a href="Index.html"><img src="imagenes/casco_cines.png"  alt="Cinque Terre " style="width: 100px;"></a>

       <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">

          <span class="navbar-toggler-icon"></span>

       </button>
       
         <!-- Creamos la barra para navegar entre paginas usando bootstrap -->
       <div class="collapse navbar-collapse" id="navbarTogglerDemo02">


            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
    
                  <a class="nav-link" href="Top.html">Top <span class="sr-only">(current)</span></a>
    
                </li>
                <li class="nav-item active">
    
                    <a class="nav-link" href="categoria.html">Categoria <span class="sr-only">(current)</span></a>
    
                </li>
                <li class="nav-item active">
    
                    <a class="nav-link" href="at_cliente.html">Atenci√≥n al cliente <span class="sr-only">(current)</span></a>
    
                </li>

            </ul>


            <form class="form-inline my-2 my-lg-0">



              <a class="navbar-brand" href="sign_in.html">Sign up</a>



            </form>


        </div>


    </nav>




    <div>
       <!-- aca va un espacio -->
       </br>




    </div>
    	<div id="login">

            <div class="container">
                <div id="login-row" class="row justify-content-center align-items-center">
                    <div id="login-column" class="col-md-6">
                        <div class="login-box col-md-12">
                            <form id="login-form" class="form" action="" method="post">
                                <h3 class="text-center text-info text-white ">Login</h3>
                                <div class="form-group">
                                    <label for="username" class="text-info text-white">Username:</label><br>
                                    <input type="text" name="username" id="username" class="form-control">
                                </div>
                                <div class="form-group" id="error_login">
                                    <label for="inputPassword" class="text-info text-white">Password:</label><br>
                                    <input type="password" class="form-control" id="inputPassword">

                                </div>
                                <div class=" text-center form-group ">
                                    <input type="button" id="boton" class="btn btn-danger btn-md  " value="Iniciar sesion">


                                            <script src="https://www.gstatic.com/firebasejs/5.7.2/firebase.js"></script>
                                            <script>
                                              // Initialize Firebase
                                             var config = {
                                                apiKey: "AIzaSyBrwLumts2gkeLjgvjer9_f7lhY3NwZUow",
                                                authDomain: "sipc-54c0f.firebaseapp.com",
                                                databaseURL: "https://sipc-54c0f.firebaseio.com",
                                                projectId: "sipc-54c0f",
                                                storageBucket: "sipc-54c0f.appspot.com",
                                                messagingSenderId: "49051567985"
                                              };
                                              firebase.initializeApp(config);

                                              var database = firebase.database();
                                              const btn = document.getElementById("boton");


                                            btn.addEventListener('click',e => {

                                                    var username = document.getElementById("username").value;                 // cogemos los valores del formulario
                                                    var pass=document.getElementById("inputPassword").value;


                                                     firebase.database().ref('/usuarios/' + username).once('value').then(function(snapshot) {

                                                         var eso = (snapshot.val() && snapshot.val().pass) || 'Anonymous';
                                                          if(snapshot.exists()){

                                                              if(eso == pass){


                                                                    document.cookie="username = "+username;



                                                                    location.href="Index.html";
                                                              }
                                                              else{

                                                                    if(document.getElementById("error_show")=== null){
                                                                     var ejemplo = document.getElementById("error_login");

                                                                   ejemplo.insertAdjacentHTML("beforeend","<h6 class='text-danger' id='error_show'>Usuario o contrasena erroneos</h6>");


                                                                }

                                                              }

                                                          }

                                                          else{
                                                                if(document.getElementById("error_show")=== null){
                                                                     var ejemplo = document.getElementById("error_login");

                                                                   ejemplo.insertAdjacentHTML("beforeend","<h6 class='text-danger' id='error_show'>Usuario o contrasena erroneos</h6>");


                                                                }

                                                          }

                                                          // firebase.database().ref('/usuarios/' + username).once('value').then(function(snapshot) {
                                                          //var eso = (snapshot.val() && snapshot.val().pass) || 'Anonymous';
                                                          //window.alert("pass es "+eso);
                                                          //});
                                                    });








                                             });


                                            </script>


                                </div>
                                <div id="register-link" class="text-right  " >
                                    <a href="sign_in.html" class="text-info text-white">Register here</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>




    </body>

</html>
